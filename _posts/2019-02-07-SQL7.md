---
title: "SQL #7: Transactions"
date: 2019-02-01
tags: []
excerpt: ":seven:"
mathjax: true
---

This is the seventh in a series of SQL notes I made during the [Kubrick](https://kubrickgroup.com/) Data Engineering training course. The others are:  
[#1: Database Theory]({{ site.url }}{{ site.baseurl }}/SQL1)  
[#2: Basic SQL]({{ site.url }}{{ site.baseurl }}/SQL2)  
[#3: SELECT]({{ site.url }}{{ site.baseurl }}/SQL3)  
[#4: Sorting]({{ site.url }}{{ site.baseurl }}/SQL4)  
[#5: CTE's, Views & JOIN]({{ site.url }}{{ site.baseurl }}/SQL5)  [#6: INDEX]({{ site.url }}{{ site.baseurl }}/SQL6)  
[#8: Other Functions]({{ site.url }}{{ site.baseurl }}/SQL8)  

All the posts in this series are my personal note taking and may be updated as the course progresses.  

A transaction is a sequence of operations performed as a single logical unit of work, which must adhere to ACID.  
It is the responsibility of the Database Engine, to provide mechanisms ensuring the physical integrity of each transaction. SQL programmers are responsible for starting and ending transactions at points that enforce the logical consistency of the data.  


# Transaction Isolation Levels
There are various levels of *transaction isolation* that can be set for a table or query.  
A query level can be set using `WITH (<LEVEL>)` for example; `SELECT * FROM Production.Product WITH (NOLOCK)` gives the query **READ UNCOMMITTED** access to the table.  
 
To set a global isolation level the syntax and options are;

```sql
SET TRANSACTION ISOLATION LEVEL 
    { READ UNCOMMITTED --Pessimistic 
    | READ COMMITTED   --DEFAULT 
    | REPEATABLE READ 
    | SNAPSHOT 
    | SERIALIZABLE  --Optimistic 
    }
```  

### Read Uncommitted: 
Can read rows that have been modified by other transactions but not yet committed. 

### Read Committed: 
Cannot read data that has been modified but not committed by other transactions. 

### Repeatable Read: 
Cannot read data that has been modified but not yet committed by other transactions and that no other transactions can modify data that has been read by the current transaction until the current transaction completes. 

### Snapshot: 
Data read by any statement in a transaction will be the transactionally consistent version of the data that existed at the start of the transaction. 

### Serializable: 
Range locks are placed in the range of key values that match the search conditions of each statement executed in a transaction. This blocks other transactions from updating or inserting any rows that would qualify for any of the statements executed by the current transaction.  

